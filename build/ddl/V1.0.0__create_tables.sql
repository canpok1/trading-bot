CREATE TABLE profits (
  id BIGINT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  profit DECIMAL(15,4) NOT NULL,
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE orders (
  id BIGINT UNSIGNED NOT NULL PRIMARY KEY,
  order_type TINYINT NOT NULL COMMENT '0:sell 1:buy',
  pair VARCHAR(15) NOT NULL,
  amount DECIMAL(10,10) NOT NULL,
  rate DECIMAL(10,10),
  stop_loss_rate DECIMAL(10,10),
  status TINYINT NOT NULL DEFAULT 0 COMMENT '0:open 1:closed 2:canceled',
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE positions (
  id BIGINT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  opener_order_id BIGINT UNSIGNED NOT NULL,
  closer_order_id BIGINT UNSIGNED,
  status TINYINT NOT NULL DEFAULT 0 COMMENT '0:open 1:closed',
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
